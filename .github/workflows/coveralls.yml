name: Coveralls

on:
  workflow_run:
    workflows: [Linux]
    types:
      - completed

jobs:
  finish:
    runs-on: ubuntu-latest
    env:
      NODE_COVERALLS_DEBUG: 1
      COVERALLS_SERVICE_JOB_ID: GCC-C++-${{steps.date.outputs.date}}-${{github.run_number}}

    steps:
      - name: Coveralls Finished
        uses: coverallsapp/github-action@master
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          parallel-finished: true
